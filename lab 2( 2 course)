# 1  Завантажте файл з даними 
url = "https://dcc.ligo.org/public/0146/P1700337/001/H-H1_LOSC_C00_4_V1-1187006834-4096.hdf5"
filename = "lab2.hdf5"
download.file(url, filename, mode = "wb")

# 2 Встановить в R пакет для роботи з HDF5 файлами.
source("http://bioconductor.org/biocLite.R")
biocLite("rhdf5")
library(rhdf5)

# 3 Виведіть зміст файлу командою h5ls().
data = h5ls(filename)

# 4 Зчитайте результати вимірів. Для цього зчитайте name Strain з групи strain
в змінну strain.
strain = h5read(filename, "strain/Strain")

# 5 Також з «strain/Strain» зчитайте атрибут (функція h5readAttributes)
Xspacing в змінну st та виведіть її. Це інтервал часу між вимірами.
st = h5readAttributes(filename, "/strain/Strain")$Xspacing
print(st)

# 6 Знайдіть час початку події та її тривалість. Для цього з групи meta зчитайте в змінну gpsStart name GPSstart та в змінну duration name Duration.
gpsStart = h5read(filename, "meta/GPSstart")
duration = h5read(filename, "meta/Duration")

# 7 Знайдіть час закінчення події та збережіть його в змінну gpsEnd.
gpsEnd = gpsStart + duration

# 8 Створіть вектор з часу вимірів і збережіть у змінну myTime. Початок послідовності – gpsStart, кінець – gpsEnd, крок – st.
myTime = seq(gpsStart, gpsEnd, st)

# 9 Побудуємо графік тільки для першого мільйону вимірів. Для цього створіть змінну numSamples, яка дорівнює 1000000.
numSamples = 10^6

# 10 Побудуйте графік за допомогою функції plot(myTime[0:numSamples], strain[0:numSamples], type = "l", xlab = "GPS Time (s)", ylab = "H1 Strain")
plot(myTime[0:numSamples], strain[0:numSamples], type = "l", xlab = "GPS Time (s)", ylab = "H1 Strain")
